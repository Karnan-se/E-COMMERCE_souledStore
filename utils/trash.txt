 <script>
                                                                    const retryButton = document.querySelectorAll(".retryTransaction");
                                                                    retryButton.forEach((retry) => {
                                                                        retry.addEventListener("click", async function () {
                                                                            console.log("retyTransaction");
                                                                            const totalamount = this.getAttribute("data-amount")
                                                                            console.log(totalamount)
                                                                            const response = await fetch(`/retryTransaction?totalPrice=${totalamount}`, {
                                                                                method: "GET",
                                                                            })
                                                                            if (!response) {
                                                                                throw new Error("internal Server Error")
                                                                            }
                                                                            const data = await response.json();
                                                                            var options = {
                                                                                "key": "rzp_test_ihsNz6lracNIu3",
                                                                                "amount": data.order.amount,
                                                                                "currency": "INR",
                                                                                "name": "Karnan Corp",
                                                                                "description": "Test Transaction",
                                                                                "image": "https://example.com/your_logo",
                                                                                "order_id": data.order.order_id,
                                                                                "handler": async (responseHandler) => {
                                                                                    const response = await fetch(`/addAmounttoWallet?amount=${data.order.amount}`, {
                                                                                        method: "GET"

                                                                                    })
                                                                                    if (!response) {
                                                                                        throw new Error("Internal Server Error")
                                                                                    }
                                                                                    const datas = response.json()
                                                                                    console.log(datas.datas)
                                                                                    const Toast = Swal.mixin({
                                                                                        toast: true,
                                                                                        position: "top-end",
                                                                                        showConfirmButton: false,
                                                                                        timer: 3000,
                                                                                        timerProgressBar: true,
                                                                                        didOpen: (toast) => {
                                                                                            toast.onmouseenter = Swal.stopTimer;
                                                                                            toast.onmouseleave = Swal.resumeTimer;
                                                                                        }
                                                                                    });
                                                                                    Toast.fire({
                                                                                        icon: "success",
                                                                                        title: "Amont credited to The Wallet"
                                                                                    }).then(() => window.location.reload())


                                                                                },
                                                                                "theme": {
                                                                                    "color": "#3399cc"
                                                                                }
                                                                            };
                                                                            var rzp1 = new Razorpay(options);
                                                                            rzp1.on('payment.failed', async (responseFailed) => {
                                                                                const Toast = Swal.mixin({
                                                                                    toast: true,
                                                                                    position: "top-end",
                                                                                    showConfirmButton: false,
                                                                                    timer: 3000,
                                                                                    timerProgressBar: true,
                                                                                    didOpen: (toast) => {
                                                                                        toast.onmouseenter = Swal.stopTimer;
                                                                                        toast.onmouseleave = Swal.resumeTimer;
                                                                                    }
                                                                                });
                                                                                Toast.fire({
                                                                                    icon: "warning",
                                                                                    title: "Transaction Failed"
                                                                                }).then(() => window.location.reload())

                                                                            });
                                                                            rzp1.open();



                                                                        })
                                                                    })
                                                                </script>